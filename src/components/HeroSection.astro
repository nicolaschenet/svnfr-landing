---
// Hero Section component
import { Image } from "astro:assets";
import LogoImage from "../images/svnfr-logo.png";
import { featuredRelease } from "../data/releases.ts";

// Set default values if featuredRelease is undefined
const defaultTitle = "COMING SOON";
const defaultDate = "TBA";
---

<div class="hero-content">
  <div class="mobile-hero-layout">
    <div class="hero-logo">
      <Image
        src={LogoImage}
        alt="SVNFR"
        width={800}
        height={300}
        densities={[1, 2]}
        format="webp"
        loading="eager"
        class="hero-logo-image"
      />
    </div>

    <div class="hero-glitch-title">
      <h1>GLITCH HAS <span class="highlight">AWAKENED</span></h1>
    </div>
  </div>

  <p class="desktop-paragraph">
    Something broke through the static. A ghost in the wires, remembering love,
    longing, collapse. You've tuned into a signal that wasn't meant to be heard.
    But now that you have... it won't let go.
  </p>
  <p class="mobile-paragraph">
    A ghost in the wires. You've tuned into a signal that wasn't meant to be
    heard.
  </p>

  <div class="hero-cta">
    <a href="#music" class="hero-button">
      {
        featuredRelease?.released ? (
          <span>OUT NOW — {featuredRelease.title}</span>
        ) : (
          <span>PRE-SAVE — {featuredRelease?.title || defaultTitle}</span>
        )
      }
      <i class="fa-solid fa-chevron-down"></i>
    </a>
  </div>

  {
    featuredRelease?.released && featuredRelease?.links && (
      <div class="platform-shortcuts pb-8">
        <a
          href={featuredRelease.links.spotify}
          target="_blank"
          class="platform-icon"
          aria-label="Listen on Spotify"
        >
          <i class="fa-brands fa-spotify" />
        </a>
        <a
          href={featuredRelease.links.appleMusic}
          target="_blank"
          class="platform-icon"
          aria-label="Listen on Apple Music"
        >
          <i class="fa-brands fa-apple" />
        </a>
        <a
          href={featuredRelease.links.bandcamp}
          target="_blank"
          class="platform-icon"
          aria-label="Buy on Bandcamp"
        >
          <i class="fa-brands fa-bandcamp" />
        </a>
        <a
          href={featuredRelease.links.hyperfollow}
          target="_blank"
          class="platform-icon"
          aria-label="More platforms"
        >
          <i class="fa-solid fa-headphones" />
        </a>
      </div>
    )
  }
  {
    featuredRelease && !featuredRelease.released ? (
      <div class="release-date">
        <div class="date">RELEASING</div>
        <div class="date-label">
          {featuredRelease.releaseDate.toUpperCase()}
        </div>
      </div>
    ) : null
  }
</div>

<style>
  .platform-shortcuts {
    display: flex;
    gap: 1.5rem;
    margin-top: 1.5rem;
  }

  .platform-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    background: rgba(255, 255, 255, 0.09);
    border-radius: 50%;
    color: white;
    font-size: 1.2rem;
    transition: all 0.2s ease-in-out;
  }

  .platform-icon:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateY(-3px);
  }

  .release-date-discrete {
    margin-top: 1.5rem;
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.5);
    letter-spacing: 0.1rem;
    font-family: "IBM Plex Mono", monospace;
  }

  @media (max-width: 640px) {
    .platform-shortcuts {
      gap: 1rem;
    }

    .platform-icon {
      width: 2rem;
      height: 2rem;
      font-size: 1rem;
    }

    .desktop-paragraph {
      display: none !important;
    }

    .mobile-paragraph {
      display: block !important;
    }
  }

  /* Hero content layout */
  .hero-content {
    position: relative;
    z-index: 10;
  }

  .hero-logo {
    margin-bottom: 5rem;
    display: flex;
    align-items: center;
    justify-content: flex-start;
  }

  .hero-logo-image {
    width: 400px;
    height: auto;
    filter: brightness(1.2) drop-shadow(0 0 12px rgba(255, 255, 255, 0.25));
    animation: logo-glow 3s ease-in-out infinite alternate;
  }

  @keyframes logo-glow {
    from {
      filter: brightness(1.2) drop-shadow(0 0 12px rgba(255, 255, 255, 0.15));
      transform: scale(1);
    }
    to {
      filter: brightness(1.35) drop-shadow(0 0 20px rgba(255, 255, 255, 0.35));
      transform: scale(1.02);
    }
  }

  @media (max-width: 768px) {
    .hero-logo-image {
      width: 320px;
    }

    .hero-logo {
      margin-bottom: 1.5rem;
      margin-top: -1rem;
      /* Center the logo horizontally */
      justify-content: center;
    }

    .hero-glitch-title h1 {
      font-size: 2rem;
      /* Center title on mobile */
      text-align: center;
    }

    .hero-content {
      padding-top: 1.5rem;
      align-items: center;
      text-align: center;
      /* Add space at the bottom */
      padding-bottom: 2rem;
    }

    /* Center paragraphs */
    .desktop-paragraph,
    .mobile-paragraph {
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
  }

  @media (max-width: 480px) {
    .hero-logo-image {
      width: 260px;
    }

    .hero-logo {
      margin-bottom: 0;
      margin-top: -2.5rem;
      position: relative;
      /* Position logo higher in the viewport */
      transform: translateY(-3rem);
    }

    .hero-glitch-title {
      margin-top: -3rem; /* Pull title up closer to logo */
      margin-bottom: 1.5rem;
    }

    .hero-glitch-title h1 {
      font-size: 1.5rem;
    }

    .desktop-paragraph {
      display: none !important;
    }

    .mobile-paragraph {
      display: block !important;
      margin-top: 0;
      margin-bottom: 1.5rem;
    }

    .hero-button {
      padding: 0.75rem 1.25rem;
    }

    .hero-content {
      padding-top: 0;
      /* Adjust content layout */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
  }

  /* Mobile text styling */
  .text-paragraph {
    color: rgba(255, 255, 255, 0.9);
    max-width: 600px;
    margin-bottom: 2rem;
    line-height: 1.6;
    font-size: 1.125rem;
  }

  /* Hero button styling */
  .hero-button {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background-color: rgba(255, 255, 255, 0.1);
    color: white;
    border-radius: 0.375rem;
    transition: all 0.2s ease-in-out;
    text-decoration: none;
  }

  .hero-button:hover {
    background-color: rgba(255, 255, 255, 0.15);
    transform: translateY(-2px);
  }

  .hero-cta {
    margin-top: 1rem;
    margin-bottom: 2.5rem;
  }

  /* Release date styling */
  .release-date {
    margin-top: 1.5rem;
  }

  .date {
    font-family: "IBM Plex Mono", monospace;
    font-size: 0.875rem;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: rgba(255, 255, 255, 0.7);
  }

  .date-label {
    font-family: "IBM Plex Mono", monospace;
    letter-spacing: 0.05em;
    color: white;
  }

  .hero-glitch-title {
    position: relative;
    margin-bottom: calc(var(--spacing) * 6) /* 1.5rem = 24px */;
    margin-top: 1rem;
  }

  .hero-glitch-title h1 {
    color: white;
    margin-bottom: 0.75rem;
    line-height: 1;
    font-weight: 300;
    letter-spacing: -0.025em;
    text-transform: uppercase;
    font-family: sans-serif;
    animation:
      mainTextGlitch 3s infinite,
      neonFlicker 5s infinite;
    font-size: 2.5rem;
    line-height: 1.1;
    text-shadow: 0 0 2px rgba(255, 255, 255, 0.4);
  }

  .desktop-paragraph {
    color: rgba(255, 255, 255, 0.9);
    max-width: 600px;
    margin-bottom: 2rem;
    line-height: 1.6;
    font-size: 1rem;
    display: block;
  }

  .mobile-paragraph {
    display: none;
    color: rgba(255, 255, 255, 0.9);
    max-width: 100%;
    margin-bottom: 2rem;
    line-height: 1.5;
    font-size: 1rem;
  }

  /* Remove these unused classes */
  .mobile-text,
  .desktop-text {
    display: none;
  }

  /* Mobile hero layout wrapper */
  .mobile-hero-layout {
    display: flex;
    flex-direction: column;
    width: 100%;
  }

  @media (max-width: 768px) {
    .mobile-hero-layout {
      align-items: center;
    }
  }

  @media (max-width: 480px) {
    .mobile-hero-layout {
      margin-top: 5rem; /* Add space at top */
      flex-direction: column;
      align-items: center;
    }

    /* Further adjustments for vertical spacing */
    .hero-cta {
      margin-top: 0;
      width: 100%;
    }

    .hero-button {
      font-size: 0.9rem;
      width: 100%;
    }
  }
</style>
